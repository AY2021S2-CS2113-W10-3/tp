@startuml

box Adding Resource
participant ":CommandHandler" as CH
participant "<<class>>\n:CommandParser" as CP
participant ":Project" as P1
participant "projectInStorage:Project" as P2

[-> CH: processCommand():Boolean
activate CH

CH -> CH: processInputBeforeAdding()
activate CH

CH -> CP: decodeInfoFragments(infoFragments:String[], keywords:String[], firstOptionalKeyword:int)
activate CP
return projectInfo:String[]

CH -> CH: addResource(projectInfo:String[])
activate CH

opt ProjectNotExist
    CH -> CH: createNewProject(projectName:String, projectUrl:String, descriptionOfUrl:String)
    activate CH
    create P1
    CH -> P1:new Project(projectName:String, projectUrl:String, descriptionOfUrl:String)
    return
end

alt UrlAlreadyExist
    CH -> CH: promptUserUrlAlreadyExist()
    activate CH
    return
else else
    CH -> CH: addNewResource(projectName:String, projectUrl:String, descriptionOfUrl:String, projectIndex:int)
    activate CH
    CH -> P2: addResources(projectUrl:String, descriptionOfUrl:String)
    activate P2
    return
    return
end

return
return
return isLoop:Boolean

@enduml